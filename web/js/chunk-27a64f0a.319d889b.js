(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a64f0a"],{"0b82":function(t,e,i){"use strict";var s=i("e9f3"),a=i.n(s);a.a},1276:function(t,e,i){"use strict";var s=i("d784"),a=i("44e7"),o=i("825a"),r=i("1d80"),n=i("4840"),c=i("8aa5"),l=i("50c4"),d=i("14c3"),h=i("9263"),p=i("d039"),u=[].push,v=Math.min,g=4294967295,f=!p((function(){return!RegExp(g,"y")}));s("split",2,(function(t,e,i){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var s=String(r(this)),o=void 0===i?g:i>>>0;if(0===o)return[];if(void 0===t)return[s];if(!a(t))return e.call(s,t,o);var n,c,l,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,f=new RegExp(t.source,p+"g");while(n=h.call(f,s)){if(c=f.lastIndex,c>v&&(d.push(s.slice(v,n.index)),n.length>1&&n.index<s.length&&u.apply(d,n.slice(1)),l=n[0].length,v=c,d.length>=o))break;f.lastIndex===n.index&&f.lastIndex++}return v===s.length?!l&&f.test("")||d.push(""):d.push(s.slice(v)),d.length>o?d.slice(0,o):d}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=r(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,a,i):s.call(String(a),e,i)},function(t,a){var r=i(s,t,this,a,s!==e);if(r.done)return r.value;var h=o(t),p=String(this),u=n(h,RegExp),y=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(f?"y":"g"),b=new u(f?h:"^(?:"+h.source+")",m),x=void 0===a?g:a>>>0;if(0===x)return[];if(0===p.length)return null===d(b,p)?[p]:[];var _=0,k=0,C=[];while(k<p.length){b.lastIndex=f?k:0;var $,w=d(b,f?p:p.slice(k));if(null===w||($=v(l(b.lastIndex+(f?0:k)),p.length))===_)k=c(p,k,y);else{if(C.push(p.slice(_,k)),C.length===x)return C;for(var S=1;S<=w.length-1;S++)if(C.push(w[S]),C.length===x)return C;k=_=$}}return C.push(p.slice(_)),C}]}),!f)},"44e7":function(t,e,i){var s=i("861d"),a=i("c6b6"),o=i("b622"),r=o("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},"4de4":function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").filter,o=i("d039"),r=i("1dde"),n=r("filter"),c=n&&!o((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));s({target:"Array",proto:!0,forced:!n||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"58e9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("header",{staticClass:"header__content",staticStyle:{position:"relative",overflow:"hidden"}},[i("Decorate"),i("div",{staticClass:"container"},[i("div",{staticClass:"he-row"},[i("div",{staticClass:"header_left"},[i("div",{staticClass:"logo"},[i("Icon",{attrs:{type:"md-add"}})],1),t._m(0)]),i("div",{staticClass:"header__change"},[i("div",{staticClass:"em-header__nav__item",class:["0"===t.modeType?"is-active":""],on:{click:function(e){return t.handleCharge("0")}}},[i("i",{staticClass:"ivu-icon ivu-icon-android-list"}),t._v(" 静态部署 ")]),i("div",{staticClass:"em-header__nav__item",class:["1"===t.modeType?"is-active":""],on:{click:function(e){return t.handleCharge("1")}}},[i("i",{staticClass:"ivu-icon ivu-icon-gear-a"}),t._v(" 自动部署 ")])])])])],1),i("section",[i("div",{staticClass:"add-page"},[i("div",{staticClass:"warp"},[t.isAddClear?i("div",[t._m(1),i("Select",{staticStyle:{width:"300px","margin-right":"15px"},on:{"on-change":t.projectNameChange},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},t._l(t.sideList,(function(e,s){return i("Option",{key:s+"w",attrs:{value:e.key}},[t._v(t._s(e.projectName))])})),1),i("Icon",{staticClass:"add-clear",attrs:{type:"ios-add-circle-outline",size:"22"},on:{click:t.handleAddClear}})],1):i("div",[t._m(2),i("Input",{staticStyle:{width:"300px","margin-right":"15px"},attrs:{placeholder:"请输入新项目名称..."},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}}),i("Icon",{staticClass:"add-clear",attrs:{type:"ios-close-circle-outline",size:"22"},on:{click:t.handleAddClear}})],1),t.isAddClear?t._e():i("div",[t._m(3),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"例如：dist"},model:{value:t.root,callback:function(e){t.root=e},expression:"root"}}),i("Tooltip",{attrs:{"max-width":"200",content:"指部署到服务器上的目录，也就是一级目录。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1),t.isEx?i("span",{staticClass:"isEx"},[t._v("此目录已存在，请重新输入！")]):t._e()],1),i("div",[i("label",[t._v("部署端口：")]),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"例如：8080 （选填）"},model:{value:t.port,callback:function(e){t.port=e},expression:"port"}}),i("Tooltip",{attrs:{"max-width":"200",content:"默认：本系统端口号/部署目录/index.html",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1),0==t.isPort?i("span",{staticClass:"isEx"},[t._v("此端口已存在，请重新输入！")]):t._e(),-2==t.isPort?i("span",{staticClass:"isEx"},[t._v("端口号格式错误，请正确输入端口号！")]):t._e(),-3==t.isPort?i("span",{staticClass:"isEx"},[t._v("端口应大于等于0且小于65536！")]):t._e()],1),t.proxy&&t.proxy.length?i("div",{staticClass:"more-proxy"},[i("label",[t._v("代理地址：")]),i("ul",t._l(t.proxy,(function(e,s){return i("li",{key:"x"+s,staticClass:"proxy"},[i("div",{staticClass:"item"},[i("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"例如：api"},model:{value:t.proxy[s].rewrite,callback:function(e){t.$set(t.proxy[s],"rewrite",e)},expression:"proxy[i].rewrite"}}),i("span",[t._v("-")]),i("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"例如：http://127.0.0.1"},model:{value:t.proxy[s].target,callback:function(e){t.$set(t.proxy[s],"target",e)},expression:"proxy[i].target"}}),i("Icon",{staticClass:"one-button-proxy",attrs:{type:"ios-add-circle-outline",size:"22"},on:{click:function(e){return e.stopPropagation(),t.handleAddProxy(!1)}}})],1),i("Icon",{staticClass:"button-proxy",attrs:{type:"ios-close-circle-outline",size:"22"},on:{click:function(e){return e.stopPropagation(),t.handleDeleteProxy(s)}}})],1)})),0)]):i("div",[i("label",[t._v("代理地址：")]),i("div",{staticClass:"proxy"},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"例如：http://127.0.0.1 （选填）"},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}}),i("Icon",{staticClass:"one-button-proxy",attrs:{type:"ios-add-circle-outline",size:"22"},on:{click:function(e){return e.stopPropagation(),t.handleAddProxy(!0)}}})],1),i("Tooltip",{attrs:{"max-width":"200",content:"默认：若需解决跨域问题，可在这里填入需要代理的接口。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1),t.target?i("span",{staticClass:"tip-text"},[t._v(" 将部署项目的 baseURL 改为： "),i("i",[t._v(t._s(t.baseUrl+"/"+t.root))])]):t._e()],1),"1"===t.modeType?i("div",[t._m(4),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"例如：http://10.0.86.12/zll/science.git"},model:{value:t.gitUrl,callback:function(e){t.gitUrl=e},expression:"gitUrl"}}),i("Tooltip",{attrs:{"max-width":"200",content:"此处填写 gitLab 仓库地址。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1):t._e(),i("transition",{attrs:{name:"fade"}},["1"===t.modeType?i("div",[i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("项目分支： ")]),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"默认：master"},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}}),i("Tooltip",{attrs:{"max-width":"200",content:"此处填写 gitLab 仓库分支，默认 master 主分支。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1):t._e()]),i("transition",{attrs:{name:"fade"}},["1"===t.modeType?i("div",[i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("部署命令： ")]),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"例如：npm run build"},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}}),i("Tooltip",{attrs:{"max-width":"200",content:"填写项目打包指令，支持 npm 和 cnpm 指令。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1):t._e()]),i("transition",{attrs:{name:"fade"}},["1"===t.modeType?i("div",[i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("打包目录： ")]),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"默认：dist"},model:{value:t.dist,callback:function(e){t.dist=e},expression:"dist"}}),i("Tooltip",{attrs:{"max-width":"200",content:"此处填写此项目的打包目录。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1):t._e()]),i("transition",{attrs:{name:"fade"}},["0"===t.modeType?i("div",[i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("部署文件： ")]),i("uploader",{key:t.uploader_key,ref:"uploader",staticClass:"uploader-example",attrs:{options:t.options,autoStart:!0,fileStatusText:t.fileStatusText},on:{"file-complete":t.fileComplete,complete:t.complete}},[i("uploader-unsupport"),t.isUpLoader?i("uploader-drop",{staticClass:"uploader-drop-botton"},[i("uploader-btn",{attrs:{directory:!0,single:!0}},[i("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}})],1)],1):t._e(),i("uploader-list")],1),i("Tooltip",{attrs:{"max-width":"200",content:"选择上传此项目的打包目录即可。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1):t._e()]),i("div",{staticClass:"banben"},[i("div",[i("label",[t._v("部署方式：")]),"1"===t.modeType?i("span",[t._v("自动部署")]):i("span",[t._v("静态部署")]),i("Tooltip",{attrs:{"max-width":"200",content:"1"===t.modeType?"此次部署之后，只要提交代码到 GitLab 仓库即可自动化部署。":"只需上传静态资源即可。",placement:"right"}},[i("Icon",{attrs:{type:"ios-help-circle-outline tip",size:"22"}})],1)],1),i("div",[i("label",[t._v("部署版本：")]),i("span",[t._v("v"+t._s(t.version))])])]),i("div",[i("label",[t._v("部署摘要：")]),i("Input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:4,placeholder:"请输入概要内容...'"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),i("div",{staticClass:"tip-box"},["1"===t.modeType?i("div",[i("h3",[i("Icon",{attrs:{type:"ios-help-circle-outline",size:"18"}}),i("span",{class:t.isHelp?"active":"",on:{click:t.handleHelp}},[t._v("关联 Git 仓库")])],1),t.isHelp?i("div",{staticClass:"tisi"},[i("div",[t._v(" 1、打开git：项目仓库 -> Settings -> Webhooks -> Add webhook ")]),i("div",[t._v(" 2、在 "),i("span",{staticClass:"code"},[t._v("Target URL")]),t._v(" 中填入 "),i("span",{staticClass:"url"},[t._v(t._s(t.$url)+"/api/deploy/git")]),t._v(" 地址 ")]),t._m(5),i("div",[t._v(" 4、 "),t.isOk?i("span",[t._v(" 在 "),i("span",{staticClass:"code"},[t._v("Secret")]),t._v(" 中填入秘钥Key： "),i("span",{staticClass:"url"},[t._v(t._s(t.key))]),t._v("； ")]):i("span",[t._v(" 在 "),i("span",{staticClass:"code"},[t._v("Secret")]),t._v(" 中填入部署成功后返回的 Key 值。 ")])]),t._m(6),i("div",[i("span",{staticStyle:{color:"red"}},[t._v("注意：")]),t._v("若项代码托管平台为GitHub时，在第 2 步中需要填入 "),i("span",{staticClass:"url"},[t._v(t._s(t.$url)+"/api/deploy/git?key="+t._s(t.key?t.key:"返回的key值"))]),t._v(" 地址。 ")])]):t._e()]):t._e()])],1),i("div",{staticClass:"button-footer"},["0"===t.modeType?i("Button",{attrs:{ghost:"",type:"success"},on:{click:t.handleSubmit}},[t._v("提交部署")]):i("Button",{attrs:{type:"success",ghost:""},on:{click:t.handleAutoSubmit}},[t._v("开始部署")]),i("Button",{attrs:{type:"error",ghost:""},on:{click:function(e){return e.stopPropagation(),t.handleClear(e)}}},[t._v("重置")]),i("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return e.stopPropagation(),t.handleBack(e)}}},[t._v("返回首页")])],1),t.zzcAutoSubmit?i("div",{staticClass:"auto-submit-zzc",on:{click:t.handleZzcAutoSubmit}}):t._e()])]),i("Modal",{attrs:{width:"360"},on:{"on-cancel":t.handleToLogin},model:{value:t.isToLogin,callback:function(e){t.isToLogin=e},expression:"isToLogin"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),i("span",[t._v("系统提示")])],1),i("div",{staticStyle:{"text-align":"center"}},[i("p",[t._v("由于您不是注册用户，暂无权执行此操作，请注册登录后操作！")])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"info",size:"large",long:""},on:{click:t.handleLoginModal}},[t._v("我要去注册")])],1)]),i("Modal",{attrs:{title:"部署日志",scrollable:"","mask-closable":!1,"footer-hide":!0},model:{value:t.isRizhi,callback:function(e){t.isRizhi=e},expression:"isRizhi"}},[i("div",{staticClass:"rz-box"}),t.isOk?i("div",{staticClass:"rz-tip"},[i("div",{staticClass:"tip-box"},[i("div",[i("p",[t._v(" √ 秘钥Key： "),i("span",{staticStyle:{color:"#3390ff"}},[t._v(t._s(t.key))])]),i("Divider",{attrs:{orientation:"left"}},[t._v("关联 Git 仓库")]),i("div",{staticClass:"tisi"},[i("div",[t._v(" 1、打开git：项目仓库 -> Settings -> Webhooks -> Add webhook； ")]),i("div",[t._v(" 2、在 "),i("span",{staticClass:"code"},[t._v("Target URL")]),t._v(" 中填入 "),i("span",{staticClass:"url"},[t._v(t._s(t.$url)+"/api/deploy/git")]),t._v(" 地址； ")]),i("div",[t._v(" 3、 "),i("span",{staticClass:"code"},[t._v("POST Content Type")]),t._v(" 选择 "),i("span",{staticClass:"select"},[t._v("application/json")]),t._v("； ")]),i("div",[t._v(" 4、在 "),i("span",{staticClass:"code"},[t._v("Secret")]),t._v(" 中填入秘钥Key： "),i("span",{staticClass:"url"},[t._v(t._s(t.key))]),t._v("； ")]),i("div",[t._v(" 5、 "),i("span",{staticClass:"code"},[t._v("Trigger On")]),t._v("选择 "),i("span",{staticClass:"select"},[t._v("Push Events")]),t._v("； ")]),i("div",[i("span",{staticStyle:{color:"red"}},[t._v("注意：")]),t._v("若项代码托管平台为 GitHub 时，在第 2 步中需要填入 "),i("span",{staticClass:"url"},[t._v(t._s(t.$url)+"/api/deploy/git?key="+t._s(t.key?t.key:"返回的key值"))]),t._v(" 地址。 ")])])],1)])]):t._e()])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header__info"},[i("span",[i("h2",[t._v("创建项目")]),i("p",[t._v(" 在这里可以创建一个新的项目，同时也可以迭代之前的项目。项目的创建分为静态部署与自动部署，可根据自身需求进行选择。 ")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v(" 所属项目： ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("所属项目： ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("部署目录： ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"star"},[t._v("*")]),t._v("Git 地址： ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v(" 3、 "),i("span",{staticClass:"code"},[t._v("POST Content Type")]),t._v(" 选择 "),i("span",{staticClass:"select"},[t._v("application/json")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v(" 5、 "),i("span",{staticClass:"code"},[t._v("Trigger On")]),t._v("选择 "),i("span",{staticClass:"select"},[t._v("Push Events")])])}],o=(i("4de4"),i("c975"),i("baa5"),i("fb6a"),i("a434"),i("b0c0"),i("ac1f"),i("1276"),i("ade3")),r=i("f9a9"),n={components:{Decorate:r["a"]},props:["typeArr","classArr"],data:function(){return{sideList:[],author:"",url:"",usre:{},content:{},isToLogin:!1,isRizhi:!1,socket:null,isKey:!0,isIp:!1,key:"",target:"",isClickBushu:!1,isPort:1,port:"",oneBugIsShow:!1,zzcAutoSubmit:!1,isHelp:!0,isEx:!1,isUpLoader:!0,uploader_key:(new Date).getTime(),options:{target:this.$url+"/api/deploy/files/add",query:{root:"",version:"1.0.1"},testChunks:!1,fileParameterName:"file"},root:"",version:"1.0.1",versionVal:"1.0.1",fileStatusText:{error:"上传失败",paused:"等待上传",success:"上传成功",uploading:"正在上传...",waiting:"等待中..."},baseUrl:"",projectName:"",idDeployment:"yes",remark:"",catalog:"",isAddClear:!0,isOk:!1,uid:"",mkdirArr:[],isHistory:"yes",proxy:[],dist:"dist",modeType:"0",gitUrl:"",branch:"master",order:"npm run build"}},watch:{root:function(t){var e=this.mkdirArr.filter((function(e){return e===t}));0===e.length?(this.options.query.root=t,this.isEx=!1):this.isEx=!0},isRizhi:function(t){!t&&this.isOk&&this.$router.push({path:"/tablePage",query:{bid:this.key}})},port:function(t){this.checkPort(t);var e=window.location.origin;this.baseUrl=this.port?e.slice(0,e.lastIndexOf(":"))+":"+this.port:this.$url}},mounted:function(){this.usre=this.$store.state.variable.info,this.author=this.usre.name,this.url=this.usre.url,this.sideList=this.$store.state.variable.projectTitleArr,this.isIp=this.isCheckIP();var t=window.location.origin;this.baseUrl=this.port?t.slice(0,t.lastIndexOf(":"))+":"+this.port:this.$url,this.getMkdir();var e=this.$router.currentRoute.query;this.projectName=e.title,this.key=e.bid,this.key?this.getProjectNameData():(this.handleClear(),this.isAddClear=!1)},methods:{handleBuShuRiZhi:function(){this.isClickBushu=!0,this.$socket.on("message",(function(t){var e=document.querySelector(".rz-box"),i=document.createElement("p");i.innerText="> "+t,t.indexOf("rror")>-1?i.style.cssText="color:red;":t.indexOf("ucces")>-1&&(i.style.cssText="color:#19be6b;"),e.appendChild(i)})),this.isRizhi=!0},isCheckIP:function(){var t=window.location.href;return t.indexOf("//localhost")>-1||t.split(".").length>=4},handleAddProxy:function(t){t&&this.proxy.push({rewrite:this.root,target:this.target}),this.proxy.push({rewrite:"",target:""})},handleDeleteProxy:function(t){this.proxy.splice(t,1)},handleClear:function(){this.bid="",this.dist="dist",this.gitUrl="",this.branch="master",this.order="npm run build",this.root="",this.isHistory="yes",this.target="",this.port="",this.key="",this.version="1.0.1",this.versionVal="1.0.1",this.options.query.version="1.0.1",this.options.query.root="",this.projectName="",this.idDeployment="yes",this.catalog="",this.remark="",this.proxy=[],this.isOk=!1},handleAddClear:function(){this.isAddClear=!this.isAddClear,this.isAddClear||this.handleClear()},projectNameChange:function(t){t&&this.getProjectNameData()},getProjectNameData:function(){var t=this;this.$Message.destroy();var e={key:this.key,accurate:1,select:"one"};"1"==this.modeType&&(e.mode=this.modeType),this.$axios.get("/api/deploy/edition/get",{params:e}).then((function(e){200==e.data.code?(t.content=e.data.data,t.setData(),t.versionVal=e.data.version):t.$Message["error"]({background:!0,content:"自动部署数据请求失败！"})})).catch((function(t){}))},setData:function(){this.proxy=this.content.proxy?JSON.parse(this.content.proxy):[],this.gitUrl=this.content.gitUrl,this.root=this.content.root,this.dist=this.content.dist,this.target=this.content.target,this.branch=this.content.branch,this.order=this.content.order,this.versionVal=this.content.version,this.getBidData()},getBidData:function(){this.isHistory=this.content.isHistory;var t=this.versionVal.split(".");t[2].indexOf("9")>-1?(t[2]=0,t[1].indexOf("9")>-1?(t[1]=0,t[0]=1*t[0]+1):t[1]=1*t[1]+1):t[2]=1*t[2]+1,this.version=t[0]+"."+t[1]+"."+t[2],this.options.query.version=this.version,this.options.query.root=this.content.root,this.root=this.content.root,this.projectName=this.content.projectName,this.uid=this.content.bid,this.port=this.content.port,this.key=this.content.key,this.catalog=this.content.catalog},complete:function(){this.isUpLoader=!1},fileComplete:function(t,e){this.catalog=t.name,this.isUpLoader=!1},getMkdir:function(){var t=this;this.$axios.post("/api/deploy/files/read").then((function(e){t.mkdirArr=e.data.mkdir})).catch((function(t){}))},checkPort:function(t){var e=this;this.content.port===t?this.isPort=1:this.$axios.post("/api/service/operation/test",this.$qs.stringify({port:t})).then((function(t){t.data.result?e.isPort=t.data.state:e.isPort=-2})).catch((function(t){}))},handleSubmit:function(){var t=this;if("admin"===this.usre.name)this.$Notice.destroy(),this.$Notice.error({title:"系统温馨提示",desc:"您不是注册用户，请注册登录后操作！"});else{var e;if(this.$Message.destroy(),!this.projectName)return void this.$Message["error"]({background:!0,content:"请选择所属项目！"});if(!this.root)return void this.$Message["error"]({background:!0,content:"部署目录不得为空！"});if(this.isUpLoader)return void this.$Message["error"]({background:!0,content:"请上传部署文件！"});var i=(e={projectName:this.projectName,author:this.author,authorId:this.usre.bid,url:this.url?this.url:"/images/dt.png",root:this.root,isHistory:this.isHistory},Object(o["a"])(e,"root",this.root),Object(o["a"])(e,"target",this.target),Object(o["a"])(e,"version",this.version),Object(o["a"])(e,"uid",this.uid),Object(o["a"])(e,"port",this.port),Object(o["a"])(e,"proxy",JSON.stringify(this.proxy)),Object(o["a"])(e,"key",this.key),Object(o["a"])(e,"catalog",this.catalog?this.catalog:this.dist),Object(o["a"])(e,"versionRoot","./"+this.root+"/"+this.version),Object(o["a"])(e,"remark",this.remark?this.remark:"更新"+this.projectName+"项目。"),Object(o["a"])(e,"dist",this.dist?this.dist:"dist"),Object(o["a"])(e,"gitUrl",this.gitUrl),Object(o["a"])(e,"branch",this.branch?this.branch:"master"),Object(o["a"])(e,"order",this.order?this.order:"npm run build"),Object(o["a"])(e,"mode",this.modeType),e);this.$Message.loading({content:"项目部署中...",duration:0}),this.$axios.post("/api/deploy/edition/add",this.$qs.stringify(i)).then((function(e){t.$Message.destroy(),e.data.result?(t.key=e.data.key,t.zzcAutoSubmit=!1,"1"===t.modeType?t.$Modal.success({title:"项目部署成功！",content:"秘钥Key："+t.key,okText:"确定",onOk:function(){t.isOk=!0}}):t.$router.push({path:"/tablePage",query:{bid:t.key}})):(t.$Message.destroy(),t.$Modal.error({title:"异常提示",content:"发生未知错误，部署失败！"}),t.zzcAutoSubmit=!1)})).catch((function(e){t.$Message.destroy(),t.$Modal.error({title:"异常提示",content:"部署路径出现问题，部署失败！"}),t.zzcAutoSubmit=!1}))}},handleAutoSubmit:function(){var t=this;if("admin"===this.usre.name)this.$Notice.destroy(),this.$Notice.error({title:"系统温馨提示",desc:"您不是注册用户，请注册登录后操作！"});else{if(this.$Message.destroy(),!this.projectName)return void this.$Message["error"]({background:!0,content:"请选择所属项目！"});if(!this.root)return void this.$Message["error"]({background:!0,content:"部署目录不得为空！"});if(!this.gitUrl)return void this.$Message["error"]({background:!0,content:"Git 地址不得为空！"});if(!this.order)return void this.$Message["error"]({background:!0,content:"部署命令不得为空！"});this.handleBuShuRiZhi(),this.zzcAutoSubmit=!0;var e={gitUrl:this.gitUrl,root:this.root,port:this.port,branch:this.branch?this.branch:"master",order:this.order};this.$Message.loading({content:"请勿关闭浏览器，项目拉取中...",duration:0}),this.$axios.post("/api/deploy/auto/clone",this.$qs.stringify(e)).then((function(i){t.$Message.destroy(),i.data.result?(t.$Message["success"]({background:!0,content:"项目拉取成功！"}),t.handleInit(e)):(t.$Message.destroy(),t.$Modal.error({title:"异常提示",content:"发生未知错误，项目拉取失败！"}),t.zzcAutoSubmit=!1)})).catch((function(t){this.$Message.destroy(),this.$Modal.error({title:"异常提示",content:"发生未知错误，项目拉取失败！"}),this.zzcAutoSubmit=!1}))}},handleInit:function(t){var e=this;this.$Message.destroy(),this.$Message.loading({content:"请勿关闭当前界面，项目正在初始化，请耐心等待...",duration:0}),this.$axios.post("/api/deploy/auto/init",this.$qs.stringify(t)).then((function(i){e.$Message.destroy(),i.data.result?(e.$Message["success"]({background:!0,content:"项目初始化成功！"}),e.handleBuild(t)):(e.$Message.destroy(),e.$Modal.error({title:"异常提示",content:"发生未知错误，项目初始化失败！"}),e.zzcAutoSubmit=!1)})).catch((function(t){e.$Message.destroy(),e.$Modal.error({title:"异常提示",content:"发生未知错误，项目初始化失败！"}),e.zzcAutoSubmit=!1}))},handleBuild:function(t){var e=this;this.$Message.destroy(),this.$Message.loading({content:"请勿关闭当前界面，项目打包中，请耐心等待...",duration:0}),this.$axios.post("/api/deploy/auto/build",this.$qs.stringify(t)).then((function(t){t.data.result?(e.$Message.destroy(),e.$Message["success"]({background:!0,content:"项目已打包完成！"}),e.isUpLoader=!1,e.handleSubmit()):(e.$Message.destroy(),e.$Modal.error({title:"异常提示",content:"发生未知错误，项目已打包失败！"}),e.zzcAutoSubmit=!1)})).catch((function(t){this.$Message.destroy(),this.$Modal.error({title:"异常提示",content:"发生未知错误，项目已打包失败！"}),this.zzcAutoSubmit=!1}))},handleZzcAutoSubmit:function(){this.$Message["warning"]({background:!0,content:"请勿关闭当前界面，项目正在部署中，请耐心等待~"})},handleBack:function(){this.$router.push({path:"/"})},handleCharge:function(t){this.modeType=t},handleHelp:function(){this.isHelp=!this.isHelp},handleToLogin:function(){this.isToLogin=!1},handleLoginModal:function(){window.sessionStorage.clear(),this.$store.commit("setUser",{}),this.$router.push({path:"/login"})}},beforeDestroy:function(){this.isClickBushu&&window.location.reload()}},c=n,l=(i("0b82"),i("2877")),d=Object(l["a"])(c,s,a,!1,null,"08e473c9",null);e["default"]=d.exports},8418:function(t,e,i){"use strict";var s=i("c04e"),a=i("9bf2"),o=i("5c6c");t.exports=function(t,e,i){var r=s(e);r in t?a.f(t,r,o(0,i)):t[r]=i}},a434:function(t,e,i){"use strict";var s=i("23e7"),a=i("23cb"),o=i("a691"),r=i("50c4"),n=i("7b0b"),c=i("65f0"),l=i("8418"),d=i("1dde"),h=Math.max,p=Math.min,u=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!d("splice")},{splice:function(t,e){var i,s,d,g,f,y,m=n(this),b=r(m.length),x=a(t,b),_=arguments.length;if(0===_?i=s=0:1===_?(i=0,s=b-x):(i=_-2,s=p(h(o(e),0),b-x)),b+i-s>u)throw TypeError(v);for(d=c(m,s),g=0;g<s;g++)f=x+g,f in m&&l(d,g,m[f]);if(d.length=s,i<s){for(g=x;g<b-s;g++)f=g+s,y=g+i,f in m?m[y]=m[f]:delete m[y];for(g=b;g>b-s+i;g--)delete m[g-1]}else if(i>s)for(g=b-s;g>x;g--)f=g+s-1,y=g+i-1,f in m?m[y]=m[f]:delete m[y];for(g=0;g<i;g++)m[g+x]=arguments[g+2];return m.length=b-s+i,d}})},b0c0:function(t,e,i){var s=i("83ab"),a=i("9bf2").f,o=Function.prototype,r=o.toString,n=/^\s*function ([^ (]*)/,c="name";!s||c in o||a(o,c,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})},b301:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!i||!s((function(){i.call(null,e||function(){throw 1},1)}))}},baa5:function(t,e,i){var s=i("23e7"),a=i("e58c");s({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},c975:function(t,e,i){"use strict";var s=i("23e7"),a=i("4d64").indexOf,o=i("b301"),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0,c=o("indexOf");s({target:"Array",proto:!0,forced:n||c},{indexOf:function(t){return n?r.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},e58c:function(t,e,i){"use strict";var s=i("fc6a"),a=i("a691"),o=i("50c4"),r=i("b301"),n=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,d=r("lastIndexOf");t.exports=l||d?function(t){if(l)return c.apply(this,arguments)||0;var e=s(this),i=o(e.length),r=i-1;for(arguments.length>1&&(r=n(r,a(arguments[1]))),r<0&&(r=i+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:c},e9f3:function(t,e,i){},f9a9:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spots"},[i("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"51px",height:"51px","margin-top":"-25.5px","margin-left":"-25.5px",top:"55.6675%",left:"5%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"28px",height:"28px","margin-top":"-14px","margin-left":"-14px",top:"10.2246%",left:"15%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(233, 34, 36)",width:"37px",height:"37px","margin-top":"-18.5px","margin-left":"-18.5px",top:"71.9133%",left:"25%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 62, 135)",width:"47px",height:"47px","margin-top":"-23.5px","margin-left":"-23.5px",top:"22.8839%",left:"35%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 135, 231)",width:"31px",height:"31px","margin-top":"-15.5px","margin-left":"-15.5px",top:"5.09172%",left:"45%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"52px",height:"52px","margin-top":"-26px","margin-left":"-26px",top:"32.1525%",left:"55%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(255, 86, 0)",width:"29px",height:"29px","margin-top":"-14.5px","margin-left":"-14.5px",top:"46.8035%",left:"65%"}}),i("span",{staticClass:"decorate",staticStyle:{width:"44px",height:"44px","margin-top":"-22px","margin-left":"-22px",top:"97.8537%",left:"75%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"43px",height:"43px","margin-top":"-21.5px","margin-left":"-21.5px",top:"30.7088%",left:"85%"}}),i("span",{staticClass:"decorate",staticStyle:{width:"27px",height:"27px","margin-top":"-13.5px","margin-left":"-13.5px",top:"7.43497%",left:"95%"}})])}],o=i("2877"),r={},n=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=n.exports},fb6a:function(t,e,i){"use strict";var s=i("23e7"),a=i("861d"),o=i("e8b5"),r=i("23cb"),n=i("50c4"),c=i("fc6a"),l=i("8418"),d=i("1dde"),h=i("b622"),p=h("species"),u=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!d("slice")},{slice:function(t,e){var i,s,d,h=c(this),g=n(h.length),f=r(t,g),y=r(void 0===e?g:e,g);if(o(h)&&(i=h.constructor,"function"!=typeof i||i!==Array&&!o(i.prototype)?a(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return u.call(h,f,y);for(s=new(void 0===i?Array:i)(v(y-f,0)),d=0;f<y;f++,d++)f in h&&l(s,d,h[f]);return s.length=d,s}})}}]);